<div class="card mb-3">

  <div class="">
    <div class="form-box">
      <form role="form" action="" method="post" class="f1">
        <div class="opti_module-title">
          {{language.config_wizard}}
          <div class="pull-right col-sm-2">

            <div class="" *ngIf="showPrintOptions">
              <div class="form-group row clearfix">
                <div class="col-sm-8 padding_right_0">
                  <select class="form-control  form-control-sm mt3 thin_select" name="print_operation_type" id="print_operation_type"
                    style=" height: calc(1.35rem + 1px) !important; " #print_operation_type>
                    <option value="">{{language.print_option}}</option>
                    <option value="1">{{language.summary}}</option>
                    <option value="2">{{language.detail}}</option>
                  </select>
                </div>
                <div class="col-sm-2 padding_left_1">
                  <button class="btn btn-sm btn-success" (click)="output_invvoice_print_lookup(print_operation_type.value)"
                    title="Test Invoice">
                    <i class="fa fa-print  fa-fw"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="f1-steps">
          <div class="f1-progress">
            <div class="f1-progress-line" data-now-value="20%" data-number-of-steps="5" style="width: 20%;"></div>
          </div>
          <div id="choose_operation" class="f1-step active  f1-step_middle">
            <div class="f1-step-icon">
              <i class="fa fa-user"></i>
            </div>
            <p>{{language.operation}}</p>
          </div>
          <div id="customer_details" class="f1-step  f1-step_middle">
            <div class="f1-step-icon">
              <i class="fa fa-user"></i>
            </div>
            <p>{{language.select_customer_document}}</p>
          </div>
          <div id="model_bom_config" class="f1-step f1-step_middle">
            <div class="f1-step-icon">
              <i class="fa fa-sitemap"></i>
            </div>
            <p>{{language.select_model_bom_config_short}}</p>
          </div>
          <div id="accept_bom_so" class="f1-step f1-step_middle">
            <div class="f1-step-icon">
              <i class="fa fa-check-circle"></i>
            </div>
            <p>{{language.verify_select_accept}}</p>
          </div>
          <div id="fina_doc_create" class="f1-step f1-step_middle">
            <div class="f1-step-icon">
              <i class="fa fa-eye"></i>
            </div>
            <p>{{language.fianl_document_creat}}</p>
          </div>
        </div>
        <fieldset class="one_step_block" data-block_id="choose_operation" style="display:block">
          <div class="wizard_heading_section">
            <div class="row bg-primary pb-1 pt-1 wizard_font">
              <div class="col-md-10 pull-left">
                <i class="fa fa-user fa-fw"></i> {{language.choose_one_action}} </div>
              <div class="col-md-2 pull-right text-right"> {{language.step_1_5}} </div>
            </div>
            <hr>
          </div>
          <div class="form_section">
            <div class="row">
              <div class="col-md-4 offset-md-4">
                <div class="form-group row clearfix">
                  <label class="col-sm-5 col-form-label" for="customer_doc">{{language.operation}}</label>
                  <div class="col-sm-5">
                    <select class="form-control  form-control-sm mt3" name="main_operation_type" id="main_operation_type"
                      [(ngModel)]="step1_data.main_operation_type" (change)="onOperationChange(main_operation_type.value)"
                      #main_operation_type>
                      <option value=""></option>
                      <option value="1">{{language.new}}</option>
                      <option value="2">{{language.modify_existing}}</option>
                      <option value="3">{{language.duplicate}}</option>
                      <option value="4">{{language.view}}</option>
                    </select>
                  </div>
                </div>

                <div class="modify_duplicate_option_block" *ngIf="modify_duplicate_selected">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="modify_duplicate_lookup">{{language.configuration}}</label>
                    <div class="col-sm-5 input-group">
                      <input type="text" ngValue="" class="form-control form-control-sm mt3" (change)="on_configuration_id_change(modify_duplicate_lookup.value)"
                        name="modify_duplicate_lookup" #modify_duplicate_lookup id="modify_duplicate_lookup"
                        placeholder="{{language.configuration}}" [(ngModel)]="step1_data.selected_configuration_key"
                        #selected_configuration_key>
                      <div class="input-group-append">
                        <span class="input-group-text cursor_icon basic-addon2-duplicate" id="basic-addon2" (click)="open_config_lookup()">
                          <i class="fa fa-bars"></i>
                        </span>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="form-group row clearfix new_output_config" *ngIf="new_output_config">
                  <label class="col-sm-5 col-form-label" for="description">{{language.description}}</label>
                  <div class="col-sm-5">
                    <input type="text" class="form-control  form-control-sm mt3" id="description" name="description"
                      value="" placeholder="{{language.description}}" [(ngModel)]="step1_data.description" (change)="description"
                      #description />
                  </div>
                </div>


              </div>
            </div>
          </div>
          <div class="f1-buttons">
            <hr>
            <!-- <div class="pull-left">
              <button type="button" routerLink="{{view_route_link}}" class="btn btn-sm btn-grey mr-10">
                <i class="fa fa-times fa-fw"></i>
                <span>{{language.cancel}}</span>
              </button>
            </div> -->
            <!-- <button type="button" *ngIf="step0_isNextButtonVisible" class="btn btn-sm btn-primary  mr-10 btn-next btn-sm" (click)="onStep0NextPress()" data-next-block="customer_details">
              <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button> -->

            <button style="display:none;" id="step0_next_click_id" type="button" class="btn btn-sm btn-primary  mr-10 btn-next"
              data-next-block="customer_details">
              <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>

            <button *ngIf="step0_isNextButtonVisible" type="button" class="btn btn-sm btn-primary  mr-10" (click)="onStep0NextPress()">
              <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>
          </div>
        </fieldset>
        <fieldset class="one_step_block" data-block_id="customer_details" style="display:none">
          <div class="wizard_heading_section">
            <div class="row bg-primary pb-1 pt-1 wizard_font">
              <div class="col-md-10 pull-left">
                <i class="fa fa-user fa-fw"></i> {{language.customer_doc_detail}} </div>
              <div class="col-md-2 pull-right text-right"> {{language.step_2_5}} </div>
            </div>
            <hr>
          </div>

          <!-- Customer and Document Details start -->
          <div class="form_section" id="opti_configur-wizard-second-step">
            <!-- document and date section start -->
            <div class="row">
              <div class="col-md-12">
                <div class="col-md-4 pl-0 float-left">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="customer_doc">{{language.document}}</label>
                    <div class="col-sm-7">
                      <select class="form-control  form-control-sm mt3" name="document" id="document" [(ngModel)]="step1_data.document"
                        (change)="onDocumentChange(document.value)" #document>
                        <option *ngFor="let v of doctype" [value]="v.value" [selected]="document.value==v.value">
                          {{v.Name}}</option>
                        <!--   <option *ngFor="let v of doctype" [value]="v.value" [selected]="v.value == '1'"> {{v.Name}}</option> -->
                      </select>
                    </div>
                  </div>
                </div>

                <div class="col-md-4 float-left">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="posting_date">{{language.posting_date}}</label>
                    <!-- <div class="col-sm-7 input-group">
                      <input [owlDateTimeTrigger]="dt12" [owlDateTime]="dt12" [selectMode]="" [min]="min" class="form-control  form-control-sm mt3" name='posting_date'
                        type="text" value="" id="posting_date" name="posting_date" readonly placeholder="{{language.posting_date}}"
                        [(ngModel)]="step1_data.posting_date">
                      <div class="input-group-append">
                        <span class="input-group-text cursor_icon" [owlDateTimeTrigger]="dt12" id="posting_date_icon">
                          <i class="fa fa-calendar"></i>
                        </span>
                      </div>
                      <owl-date-time #dt12 [pickerType]="'calendar'"></owl-date-time>
                    </div> -->
                    <div class="col-sm-7">
                      <input class="form-control  form-control-sm mt3" name='posting_date' type="text" value="" id="posting_date"
                        name="posting_date" readonly placeholder="{{language.posting_date}}" [(ngModel)]="step1_data.posting_date">
                      <!-- <div class="input-group-append">
                        <span class="input-group-text cursor_icon" [owlDateTimeTrigger]="dt12" id="posting_date_icon">
                          <i class="fa fa-calendar"></i>
                        </span>
                      </div> -->
                      <owl-date-time #dt12 [pickerType]="'calendar'"></owl-date-time>
                    </div>
                  </div>
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="delivery_until">{{document_date}}</label>
                    <div class="col-sm-7 input-group">
                      <input [owlDateTimeTrigger]="dt13" [owlDateTime]="dt13" [selectMode]="" [min]="min" class="form-control  form-control-sm mt3"
                        name='delivery_until' type="text" value="" id="delivery_until" name="delivery_until" readonly
                        placeholder="{{document_date}}" [(ngModel)]="step1_data.delivery_until">
                      <div class="input-group-append">
                        <span class="input-group-text cursor_icon" [owlDateTimeTrigger]="dt13" id="delivery_until_icon">
                          <i class="fa fa-calendar"></i>
                        </span>
                      </div>
                      <owl-date-time #dt13 [pickerType]="'calendar'"></owl-date-time>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- document and date section end -->
            <hr>

            <!-- Address and customer detail start -->
            <div class="row">
              <div class="col-md-12">

                <!-- customer info start -->
                <div class="col-md-4 pl-0 float-left">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="customer_doc">{{language.customer}}</label>
                    <div class="col-sm-7 input-group">
                      <input type="text" ngValue="" class="form-control form-control-sm mt3" (change)="onCustomerChange()"
                        name="customer" id="customer" placeholder="{{language.customer}}" [(ngModel)]="step1_data.customer"
                        #customer>
                      <div class="input-group-append">
                        <span class="input-group-text cursor_icon" id="basic-addon2" (click)="openCustomerLookUp()">
                          <i class="fa fa-bars"></i>
                        </span>
                      </div>
                    </div>
                  </div>

                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="customer_doc">{{language.Name}}</label>
                    <div class="col-sm-7">
                      <input type="text" ngValue="" readonly class="form-control  form-control-sm mt3" name="customer_name"
                        id="customer_name" placeholder="{{language.name}}" [(ngModel)]="step1_data.customer_name"
                        #customername>

                    </div>
                  </div>

                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="contact_persons">{{language.contact_person}}</label>
                    <div class="col-sm-7">
                      <select class="form-control  form-control-sm mt3" #person name="contact_persons" id="contact_persons"
                        (change)="onContactPersonChange(person.value)">
                        <option [selected]="person.value == v.Name" *ngFor="let v of contact_persons" [value]="v.Name">
                          {{v.Name}}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <!-- customer info end -->


                <!-- shipment code start -->
                <div class="col-md-4 float-left">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="ship_to">{{language.ship_to}}</label>
                    <div class="col-sm-7">
                      <select class="form-control  form-control-sm mt3" #customerShipTo name="ship_to" id="ship_to"
                        (change)="onShipToChange(customerShipTo.value)">
                        <option [selected]="customerShipTo.value == v.ShipToDef" *ngFor="let v of ship_to" [value]="v.ShipToDef">
                          {{v.ShipToDef}}</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="ship_to_address">{{language.address}}</label>
                    <div class="col-sm-7">
                      <textarea type="text" ngValue="" readonly class="form-control  form-control-sm mt3" name="ship_to_address"
                        id="ship_to_address" placeholder="{{language.ship_to_address}}" [(ngModel)]="step1_data.ship_to_address"
                        #shipto></textarea>
                    </div>
                  </div>

                </div>
                <!-- shipment code end -->

                <!-- bill code start -->
                <div class="col-md-4 float-left">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="bill_to">{{language.bill_to}}</label>
                    <div class="col-sm-7">
                      <select class="form-control  form-control-sm mt3" #customerBillTo name="bill_to" id="bill_to"
                        (change)="onBillToChange(customerBillTo.value)">
                        <option [selected]="customerBillTo.value == v.BillToDef" *ngFor="let v of bill_to" [value]="v.BillToDef">
                          {{v.BillToDef}}</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="bill_to_address">{{language.address}}</label>
                    <div class="col-sm-7">
                      <textarea type="text" rows="3" readonly ngValue="" class="form-control  form-control-sm mt3" name="bill_to_address"
                        id="bill_to_address" placeholder="{{language.bill_to_address}}" [(ngModel)]="step1_data.bill_to_address"
                        #shipto></textarea>
                    </div>
                  </div>

                </div>
                <!-- bill code end -->

              </div>
              <!-- <div class="col-md-5">
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label" for="payment_terms">{{language.payment_terms}}</label>
                  <div class="col-sm-8">
                    <input type="text" ngValue="" class="form-control  form-control-sm mt3" name="payment_terms" id="payment_terms" placeholder="{{language.payment_terms}}"
                      [(ngModel)]="step1_data.payment_terms" #paymentterms>

                  </div>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label" for="payment_method">{{language.payment_method}}</label>
                  <div class="col-sm-8">
                    <input type="text" ngValue="" class="form-control  form-control-sm mt3" name="payment_method" id="payment_method" placeholder="{{language.payment_method}}"
                      [(ngModel)]="step1_data.payment_method" #paymentmethod>

                  </div>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label" for="attachment">{{language.attachment}}</label>
                  <div class="col-sm-8">
                    <input type="file" ngValue="" class="form-control  form-control-sm mt3" name="attachment" id="attachment" placeholder="{{language.attachment}}"
                      [(ngModel)]="step1_data.attachment" #attachment>

                  </div>
                </div>
              </div> -->
            </div>
            <!-- Address and customer detail end -->

            <hr>
            <!-- employee section , owner and remark section end -->
            <div class="row">
              <div class="col-md-12">
                <div class="col-md-4 pl-0">
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="sales_employee">{{language.sales_employee}}</label>
                    <div class="col-sm-7">
                      <select class="form-control  form-control-sm mt3" #salesemployee name="sales_employee" id="sales_employee"
                        (change)="onSalesPersonChange(salesemployee.value)">
                        <option [selected]="salesemployee.value == v.SlpName" *ngFor="let v of sales_employee" [value]="v.SlpName">
                          {{v.SlpName}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="owner_list">{{language.owner}}</label>
                    <div class="col-sm-7">
                      <!-- <input type="text" ngValue="" readonly class="form-control  form-control-sm mt3" name="owner" id="owner" placeholder="{{language.owner}}"
                        [(ngModel)]="step1_data.owner" #owner> -->
                      <select class="form-control  form-control-sm mt3" #owner name="owner_list" id="owner_list">
                        <option *ngFor="let v of owner_list" [selected]="owner.value == v.lastName" [value]="v.value">
                          {{v.lastName}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row clearfix">
                    <label class="col-sm-5 col-form-label" for="remark">{{language.remark}}</label>
                    <div class="col-sm-7">
                      <textarea type="text" rows="4" ngValue="" class="form-control  form-control-sm mt3" name="remark"
                        id="remark" placeholder="{{language.remark}}" [(ngModel)]="step1_data.remark" #remark> </textarea>

                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="col-md-5">
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label" for="tax_code">{{language.tax_code}}</label>
                  <div class="col-sm-8 input-group">
                    <input type="text" ngValue="" class="form-control  form-control-sm mt3" name="tax_code" id="tax_code" placeholder="{{language.tax_code}}"
                      [(ngModel)]="step1_data.tax_code" #taxcode>
                    <div class="input-group-append">
                      <span class="input-group-text cursor_icon" id="basic-addon2" (click)="openTaxCodes()">
                        <i class="fa fa-bars"></i>
                      </span>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
            <!-- employee section , owner and remark section end -->
          </div>
          <!-- Customer and Document Details end -->

          <div class="f1-buttons">
            <hr>

            <span class="output_final_screen_save_button">
              <button (click)="onSavePress()" *ngIf="isNextButtonVisible" type="button" class="btn btn-sm btn-success   mr-10">
                <i class="fa fa-check fa-fw"></i> {{language.save}}</button>
            </span>


            <button type="button" class="btn btn-sm btn-dark  mr-10 btn-previous" (click)="this.showPrintOptions = false;"
              data-previous-block="choose_operation">
              <i class="fa fa-arrow-left fa-fw"></i> {{language.previous}}</button>
            <button type="button" *ngIf="isNextButtonVisible" class="btn btn-sm btn-primary  mr-10 btn-sm " (click)="step2_next_click_validation()">
              <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>

            <button type="button" style="display:none" *ngIf="isNextButtonVisible" class="btn btn-sm btn-primary  mr-10 btn-next btn-sm step_2_redirect"
              data-next-block="model_bom_config">
              <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>
          </div>
        </fieldset>

        <fieldset class="one_step_block" data-block_id="model_bom_config">
          <div class="wizard_heading_section">
            <div class="row bg-primary pb-1 pt-1 wizard_font">
              <div class="col-md-10 pull-left">
                <i class="fa fa-sitemap fa-fw"></i> {{language.model_bill_ofm}} </div>
              <div class="col-md-2 pull-right text-right"> {{language.step_3_5}} </div>
            </div>
            <hr>
          </div>

          <!-- Model BOM To Configure Product start -->
          <div class="form_section" id="opti_configur-wizard-third-step">
            <div class="row">
              <!-- left section start -->
              <div class="col-md-5" id="opti_configur-wizard-third-step-leftside">
                <div class="form-group row clearfix">
                  <label class="col-sm-3 col-form-label" for="model">{{language.model}}</label>
                  <div class="col-sm-9 input-group">
                    <input type="hidden" ngValue="" class="form-control  form-control-sm mt3" [(ngModel)]="step2_data.modal_id"
                      name="modelName" id="modelNameId">
                    <input type="text" ngValue="" class="form-control  form-control-sm mt3" name="model" id="model"
                      placeholder="{{language.model}}" [(ngModel)]="step2_data.model_code" #modelcode (change)="onModelCodeChange()">
                    <div class="input-group-append">
                      <span class="input-group-text cursor_icon" id="basic-addon2" (click)="openModalList()">
                        <i class="fa fa-bars"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-3 col-form-label" for="quantity">{{language.quantity}}</label>
                  <div class="col-sm-9">
                    <input type="text" ngValue="" pattern="\d+" class="form-control  form-control-sm mt3 pull-right"
                      name="quantity" id="quantity" placeholder="{{language.quantity}}" [(ngModel)]="step2_data.quantity"
                      #quantity (change)="on_input_change('quantity',quantity.value)" style="text-align:right">

                  </div>
                </div>
                <hr>
                <div class="new_tree_structure_area" *ngIf="ModelHeaderData.length > 0">
                  <div class="panel-group" id="step_default_{{step2_data.model_code}}" role="tablist"
                    aria-multiselectable="true">
                    <div class="panel panel-default custom_panel_box" *ngFor="let header_data of ModelHeaderData; let i = index;">
                      <div class="panel-heading custom_panel_header" role="tab" id="feature_id_{{header_data.OPTM_FEATUREID}}">
                        <h4 class="panel-title">
                          <a role="button" attr.data-toggle="collapse" attr.data-parent="{{'#step_default_'+step2_data.model_code}}"
                            attr.aria-expanded="false" attr.aria-controls="{{header_data.OPTM_FEATUREID}}" class="custom_panel_parent_section">
                            {{header_data.OPTM_DISPLAYNAME}}
                            <span class="text-right pull-right custom_panel_icon_section">
                              <i class="fa fa-plus"></i>
                            </span>
                          </a>
                        </h4>
                      </div>
                      <div id="feature_id_{{header_data.OPTM_FEATUREID}}" class="panel-collapse collapse custom_panel_child_section"
                        role="tabpanel" attr.aria-labelledby="feature_id_{{header_data.OPTM_FEATUREID}}">
                        <div class="panel-body">
                          <table class="parent_table inner-table table table-bordered table-strip table-sm">
                            <thead class="thead-dark">
                              <tr>
                                <th>#</th>
                                <th>{{language.code}}</th>
                                <th>{{language.description}}</th>
                                <th>{{language.image}}</th>
                              </tr>
                            </thead>
                            <tbody *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length > 0">
                              <tr *ngFor="let feature_model_data of get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel); let i= index;" [ngClass]="{'tr-disabled' :feature_model_data.disable}">
                                <td>
                                  <div class="{{header_data.element_class}}">
                                    <span *ngIf="header_data.is_second_level == 1">
                                      <input type="{{header_data.element_type}}" id="checkbox_child_{{feature_model_data.OPTM_FEATUREID}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                        #selectionchecked name="checkbox_child_{{feature_model_data.OPTM_FEATUREID}}_{{feature_model_data.OPTM_LINENO}}"
                                        class="custom-control-input" (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id)"
                                        [(checked)]="feature_model_data.checked" [disabled]="feature_model_data.disable">
                                      <label class="custom-control-label" for="checkbox_child_{{feature_model_data.OPTM_FEATUREID}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"></label>
                                    </span>
                                    <span *ngIf="header_data.is_second_level== undefined">
                                      <input type="{{header_data.element_type}}" id="checkbox_{{feature_model_data.OPTM_FEATUREID}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                        #selectionchecked name="checkbox_{{feature_model_data.OPTM_FEATUREID}}" class="custom-control-input"
                                        (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id)"
                                        [(checked)]="feature_model_data.checked" [disabled]="feature_model_data.disable">
                                      <label class="custom-control-label" for="checkbox_{{feature_model_data.OPTM_FEATUREID}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"></label>
                                    </span>

                                  </div>
                                </td>
                                <td>
                                  <span *ngIf="feature_model_data['OPTM_TYPE']=='1'">{{feature_model_data.feature_code}}</span>
                                  <span *ngIf="feature_model_data['OPTM_TYPE']=='2'">{{feature_model_data.OPTM_ITEMKEY}}</span>
                                  <span *ngIf="feature_model_data['OPTM_TYPE']=='3'">{{feature_model_data.OPTM_VALUE}}</span>
                                </td>
                                <td>{{feature_model_data.OPTM_DISPLAYNAME}}</td>
                                <td>
                                  <div class="image-preivew" *ngIf="feature_model_data.IMAGEPATH!=''">
                                    <img src="{{feature_model_data.IMAGEPATH}}" style="width:40px" alt="" class="img-thumbnail">
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                            <tfoot *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length == 0">
                              <tr>
                                <td>
                                  <div class="{{header_data.element_class}}">
                                    <input type="{{header_data.element_type}}" id="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}"
                                      name="checkbox_{{header_data.OPTM_FEATUREID}}" #selectionchecked class="custom-control-input"
                                      (change)="onselectionchange(header_data,selectionchecked,selectionchecked.id)"
                                      [(checked)]="FeatureBOMDataForSecondLevel.checked" [disabled]="FeatureBOMDataForSecondLevel.disable">
                                    <label class="custom-control-label" for="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}">
                                    </label>
                                  </div>
                                </td>
                                <!-- <td>{{header_data.OPTM_DISPLAYNAME}}</td> -->
                                <td>
                                  <span *ngIf="header_data['OPTM_TYPE']=='1'">{{header_data.feature_code}}</span>
                                  <span *ngIf="header_data['OPTM_TYPE']=='2'">{{header_data.OPTM_ITEMKEY}}</span>
                                  <span *ngIf="header_data['OPTM_TYPE']=='3'">{{header_data.child_code}}</span>
                                </td>
                                <td>{{header_data.OPTM_DISPLAYNAME}}</td>
                                <td>
                                  <div class="image-preivew" *ngIf="header_data.IMAGEPATH!=''">
                                    <img src="{{header_data.IMAGEPATH}}" style="width:40px" alt="" class="img-thumbnail">
                                  </div>
                                </td>
                              </tr>
                            </tfoot>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


                <hr>
                <div class="form-group row clearfix" style="padding-right: 15px;">
                  <label class="col-sm-3 col-form-label" for="accessory">{{language.Model_Accessory}}</label>
                  <div class="col-sm-12 pr-0">
                    <kendo-grid [kendoGridBinding]="feature_accessory_list" [resizable]="true" [sortable]="false"
                      [groupable]="false" [filterable]="false">
                      <kendo-grid-column field="step_2_accesories_checkbox" title="" template="" [width]="30"
                        [minResizableWidth]="30">

                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex" let-dataItem>

                          <div class="custom-control custom-checkbox ">
                            <input type="checkbox" id="acccessory_parent_check{{dataItem.id}}" name="acccessory_parent_check{{dataItem.id}}"
                              class="custom-control-input accesory_check_for_second_screen" #accallcheckbox (click)="selectallAccessory(accallcheckbox.checked)">
                            <label class="custom-control-label" for="acccessory_parent_check{{dataItem.id}}"></label>
                          </div>
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <div class="custom-control custom-checkbox ">
                            <input type="checkbox" id="accesory_child_checkbox_{{dataItem.id}}" name="accesory_child_checkbox"
                              [(checked)]="dataItem.checked" #checkedvalue (change)="onAccessorySelectionChange(checkedvalue.checked,dataItem)"
                              class="custom-control-input">
                            <label class="custom-control-label" for="accesory_child_checkbox_{{dataItem.id}}"></label>
                          </div>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_2_accesories_code" title="" template="" [width]="150"
                        [minResizableWidth]="150">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.code}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <span>
                            {{dataItem.name}}
                          </span>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_2_accesories_name" title="" template="" [width]="150"
                        [minResizableWidth]="150">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.Name}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <span>
                            {{dataItem.key}}
                          </span>
                        </ng-template>
                      </kendo-grid-column>
                    </kendo-grid>
                    <!-- <table class="table  table-sm lookup_table Model_Accessory-table">
                      <thead class="thead-dark">
                        <tr>
                          <th *ngFor="let label of accessory_table_head; let i= index" [hidden]="Accessory_table_hidden_elements[i]">
                            <span *ngIf="i==0">
                              <div class="custom-control custom-checkbox ">
                                <input type="checkbox" id="acccessory_check{{label}}_{{i}}" name="child_checkbox" class="custom-control-input accesory_check_for_second_screen"
                                  #accallcheckbox (click)="selectallAccessory(accallcheckbox.checked)">
                                <label class="custom-control-label" for="acccessory_check{{label}}_{{i}}"></label>
                              </div>
                            </span>
                            <span *ngIf="i!=0">
                              {{label}}
                            </span>
                          </th>
                        </tr>
                      </thead>
                      <tbody class="lookup_table_body" [perfectScrollbar]="" [disabled]="isPerfectSCrollBar">
                        <tr class="" *ngFor="let row of feature_accessory_list">
                          <td *ngFor="let row_data of Object.keys(row); let i= index" [hidden]="Accessory_table_hidden_elements[i]">
                            <span *ngIf="i==0">
                              <div class="custom-control custom-checkbox ">
                                <input type="checkbox" id="accesory_{{row[row_data]}}" name="child_checkbox" [(checked)]=row.checked #checkedvalue (change)="onAccessorySelectionChange(checkedvalue.checked,row)"
                                  class="custom-control-input">
                                <label class="custom-control-label" for="accesory_{{row[row_data]}}"></label>
                              </div>
                            </span>
                            <span *ngIf="i!=0">
                              {{row[row_data]}}
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </table> -->
                  </div>
                </div>
              </div>
              <!-- left section end -->

              <!-- right section start -->
              <div class="col-md-7 border-left-primary" id="opti_configur-wizard-third-step-rightside">
                <div class="modal_heading_block" *ngIf="isModelVisible">
                  <div class="form-group col-md-12 clearfix pl-0 pr-0">
                    <span class="col-sm-6 bg-light border border-primary">{{language.model}}</span>
                    <span class="col-sm-6 bg-light border border-primary">{{step2_data.model_code}}</span>
                    <hr>
                  </div>
                </div>
                <div class="feature_block">
                  <div class="feature_table">
                    <div class="">
                      <kendo-grid [kendoGridBinding]="feature_itm_list_table" [resizable]="true" [sortable]="false"
                        [groupable]="false" [filterable]="false">
                        <kendo-grid-column field="step_2_right_grid_feature_name" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.Model_FeatureName}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            <span>
                              <input [disabled]="featurerow.FeatureId" type="hidden" class="form-control  form-control-sm mt3"
                                id="type_value" value={{featurerow.FeatureId}} title="{{featurerow.FeatureId}}" />
                              {{featurerow.featureName}}
                            </span>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="step_2_right_grid_item" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.item}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            {{featurerow.Item}}
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="step_2_right_grid_description" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.description}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            {{featurerow.Description}}
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="step_2_right_grid_quantity" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.quantity}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            <input type="text" step="0" class="form-control  form-control-sm mt3" style="text-align:right"
                              id="quantity" value="{{featurerow.quantity}}" title="{{featurerow.quantity}}" (change)="on_feature_input_change('quantity',quantity.value,featurerow.FeatureId,featurerow.Item)"
                              #quantity [disabled]="featurerow.isQuantityDisabled" />
                          </ng-template>
                        </kendo-grid-column>
                       <!--  <kendo-grid-column field="step_2_right_grid_price_source" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.price_source}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            <div class=" input-group">
                              <input type="hidden" title="{{featurerow.price_id}}" ngValue="" class="form-control  form-control-sm mt3"
                                [(ngModel)]="featurerow.price_id" name="priceId" id="priceId">
                              <input type="text" title="{{featurerow.price}}" style="text-align:right" ngValue="" class="form-control  form-control-sm mt3"
                                name="price_code" id="price_code" (change)="on_feature_input_change('price',price.value,featurerow.FeatureId,featurerow.Item)"
                                value={{featurerow.price}} #price_code [disabled]="featurerow.isPriceDisabled">
                              <div class="input-group-append" [hidden]=featurerow.pricehide>
                                <span class="input-group-text cursor_icon" id="basic-addon2" (click)="openPriceListLookup()">
                                  <i class="fa fa-bars"></i>
                                </span>
                              </div>
                            </div>
                          </ng-template>
                        </kendo-grid-column> -->
                        <kendo-grid-column field="step_2_right_grid_price" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.price}} ({{defaultCurrency}})
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            <input [disabled]="featurerow.isPriceDisabled" type="text"  #actual_price title="{{featurerow.Actualprice}}" class="form-control  form-control-sm mt3"
                              style="text-align:right" id="quantity" value={{featurerow.Actualprice}} (change)="on_feature_input_change('actual_price',actual_price.value,featurerow.FeatureId,featurerow.Item)"
                              #pricextn />
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="step_2_right_grid_price_extn" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.price_extn}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            <input type="text" title="{{featurerow.priceext}}" disabled class="form-control  form-control-sm mt3"
                              style="text-align:right" id="quantity" value={{featurerow.pricextn}} (change)="on_feature_input_change('priceext',pricextn.value,featurerow.FeatureId,featurerow.Item)"
                              #pricextn />
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="step_2_right_grid_accessories" title="" template="" [width]="120"
                          [minResizableWidth]="120">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            {{this.language.accessories}}
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-featurerow>
                            {{featurerow.is_accessory}}
                          </ng-template>
                        </kendo-grid-column>
                      </kendo-grid>
                      <!-- <table class="table opti_fixed-header table-sm">
                        <thead class="thead-dark">
                          <tr>
                            <th *ngFor="let label of feature_itm_list_table_head; let i= index">
                              <span>
                                {{label}}
                              </span>
                            </th>
                          </tr>
                        </thead>
                        <tbody style="position: relative;" [perfectScrollbar]="" [disabled]="isPerfectSCrollBar">
                          <tr class="" *ngFor="let featurerow of feature_itm_list_table">
                            <td>
                              <input [disabled]="featurerow.FeatureId" type="hidden" class="form-control  form-control-sm mt3" id="type_value" value={{featurerow.FeatureId}}
                                title="{{featurerow.FeatureId}}" /> {{featurerow.featureName}}
                            </td>
                            <td>
                              {{featurerow.Item}}
                            </td>
                            <td>
                              {{featurerow.Description}}
                            </td>
                            <td>
                              <input type="text" step="0" class="form-control  form-control-sm mt3" style="text-align:right" id="quantity" value="{{featurerow.quantity}}"
                                title="{{featurerow.quantity}}" (change)="on_feature_input_change('quantity',quantity.value,featurerow.FeatureId,featurerow.Item)"
                                #quantity [disabled]="featurerow.isQuantityDisabled" />
                            </td>
                            <td>
                            
                              <div class=" input-group">
                                <input type="hidden" title="{{featurerow.price_id}}" ngValue="" class="form-control  form-control-sm mt3" [(ngModel)]="featurerow.price_id"
                                  name="priceId" id="priceId">
                                <input type="text" title="{{featurerow.price}}" style="text-align:right" ngValue="" class="form-control  form-control-sm mt3"
                                  name="price_code" id="price_code" (change)="on_feature_input_change('price',price.value,featurerow.FeatureId,featurerow.Item)"
                                  value={{featurerow.price}} #price_code [disabled]="featurerow.isPriceDisabled">
                                <div class="input-group-append" [hidden]=featurerow.pricehide>
                                  <span class="input-group-text cursor_icon" id="basic-addon2" (click)="openPriceListLookup()">
                                    <i class="fa fa-bars"></i>
                                  </span>
                                </div>
                              </div>
                            </td>
                            <td>
                              <input type="number" title="{{featurerow.priceext}}" class="form-control  form-control-sm mt3" style="text-align:right" id="quantity"
                                value={{featurerow.pricextn}} (change)="on_feature_input_change('priceext',pricextn.value,featurerow.FeatureId,featurerow.Item)"
                                #pricextn />
                            </td>
                            <td>
                              {{featurerow.is_accessory}}
                       
                            </td>
                          </tr>
                        </tbody>
                      </table> -->
                    </div>
                  </div>
                  <br>
                  <div class="feature_discount_table">
                    <div class="col-md-6 pull-right pr-0 ">
                      <table class="table table-bordered table-sm">
                        <thead class="" style=" font-size: 14px; ">
                          <tr>
                            <td>
                              {{this.language.total_before_discount}} ({{defaultCurrency}})
                            </td>
                            <td class="text-right mr-3">{{this.feature_total_before_discount | toFixed:'3'}}</td>
                          </tr>
                          <tr>
                            <td width="70%">{{language.product_discount}}</td>
                            <td width="30%">
                              <input type="text" class="form-control  form-control-sm mt3 text-right" style="height: 25px;     float: right;
    text-align: right;     padding-right: 1.5px !important;"
                                id="product_discount" name="product_discount" #product_discount (change)="on_calculation_change('product_discount',product_discount.value)"
                                [(ngModel)]="this.feature_discount_percent" />
                            </td>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- <tr>
                              <td>
                                {{this.language.product_tax}}
                              </td>
                              <td>{{this.feature_item_tax}}</td>
                            </tr> -->

                          <tr>
                            <td>
                              {{this.language.product_total}} ({{defaultCurrency}})
                            </td>
                            <td class="text-right mr-3">{{this.feature_item_total | toFixed:'3'}}</td>
                          </tr>
                          <tr>
                            <td>
                              {{this.language.accessories_discount}}
                            </td>
                            <td class="text-right mr-3">
                              <input type="text" class="form-control  form-control-sm mt3 text-right" style="height: 25px;     float: right;
    text-align: right; padding-right: 1.5px !important;"
                                id="accessory_item_discount" name="accessory_item_discount" #accessory_item_discount
                                (change)="on_calculation_change('accesory_discount',accessory_item_discount.value)"
                                [(ngModel)]="this.accessory_discount_percent" />
                            </td>
                          </tr>
                          <!-- <tr>
                              <td>
                                {{this.language.accessories_tax}}
                              </td>
                              <td>{{this.acc_item_tax}}</td>
                            </tr> -->
                          <tr>
                            <td>
                              {{this.language.accessories_total}} ({{defaultCurrency}})
                            </td>
                            <td class="text-right mr-3">{{this.accessory_item_total | toFixed:'3'}}</td>
                          </tr>
                        </tbody>
                        <tfoot>
                          <tr style=" font-size: 14px; ">
                            <th>{{this.language.grand_total}} ({{defaultCurrency}})</th>
                            <td class="text-right mr-3">{{this.acc_grand_total | toFixed:'3'}}</td>
                          </tr>
                        </tfoot>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="clearfix"></div>
              </div>
              <!-- right section end -->

            </div>
          </div>
          <!-- Model BOM To Configure Product end -->

          <div class="row">
            <div class="f1-buttons col-sm-4 pull-left  model_bom_buttons f1_button_top_border_padding">
              <button type="button" class="btn btn-sm btn-secondary  mr-10 float-left" (click)="onclearselection()">
                <i class="fa fa-times fa-fw"></i> {{language.clear_selection}}</button>
              <!-- <button type="button" class="btn btn-sm btn-info  mr-10 ">
                <i class="fa fa-plus-square fa-fw"></i> {{language.add_model}}</button> -->
            </div>
            <div class="f1-buttons col-sm-8 pull-right f1_button_top_border_padding">

              <span class="output_final_screen_save_button">
                <button (click)="onSavePress()" type="button" class="btn btn-sm btn-success  mr-10 ">
                  <i class="fa fa-check fa-fw"></i> {{language.save}}</button>
              </span>

              <button type="button" class="btn btn-sm btn-dark  mr-10 btn-previous" data-previous-block="customer_details">
                <i class="fa fa-arrow-left fa-fw"></i> {{language.previous}}</button>

              <button style="display:none;" id="modelbom_next_click_id" type="button" class="btn btn-sm btn-primary  mr-10 btn-next"
                data-next-block="accept_bom_so" (click)="onModelBillNextPress()">
                <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>

              <button *ngIf="validnextbtn" type="button" class="btn btn-sm btn-primary  mr-10" (click)="onValidateNextPress()">
                <i class="fa fa-arrow-right fa-fw"></i> {{language.next}}</button>
            </div>
          </div>
        </fieldset>

        <fieldset class="one_step_block" data-block_id="accept_bom_so">
          <div class="wizard_heading_section">
            <div class="row bg-primary pb-1 pt-1 wizard_font">
              <div class="col-md-10 pull-left">
                <i class="fa fa-user fa-fw"></i> {{language.verify_select_final}} </div>
              <div class="col-md-2 pull-right text-right"> {{language.step_4_5}} </div>
            </div>
            <hr>
          </div>

          <!-- Verify the Selection and Accept -->
          <div class="form_section" id="opti_configur-wizard-four-step">
            <div class="row">
              <div class="col-md-5" id="opti_configur-wizard-four-step-left">
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.order_type}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.document_name}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.posting_date}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.posting_date | date:
                    'MM/dd/yyyy' }}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.delivery_date}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.delivery_until | date:
                    'MM/dd/yyyy'}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.customer}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.customer}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.Name}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.customer_name}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.contact_person}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.person_name}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.ship_to}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.ship_to}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.address}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.ship_to_address}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.bill_to}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.bill_to}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.address}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.bill_to_address}}</label>
                </div>
                <!-- <div class="form-group row clearfix">
                  <label class="col-sm-6 col-form-label">
                    <b>{{language.payment_terms}}</b>
                  </label>
                  <label class="col-sm-6 col-form-label">{{step1_data.payment_terms}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-6 col-form-label">
                    <b>{{language.payment_method}}</b>
                  </label>
                  <label class="col-sm-6 col-form-label">{{step1_data.payment_method}}</label>
                </div> -->
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.sales_employee}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.sales_employee}}</label>
                </div>
                <div class="form-group row clearfix">
                  <label class="col-sm-4 col-form-label">
                    <b>{{language.remark}}</b>
                  </label>
                  <label class="col-sm-8 col-form-label font-weight-light">{{step1_data.remark}}</label>
                </div>
              </div>
              <div class="col-md-7 border-left-primary" id="opti_configur-wizard-four-step-right">
                <div class="col-md-12 pl-0">
                  <button type="button" class="mr-10 btn btn-sm btn-outline-danger mb-2" (click)="delete_multiple_final_modal()">
                    <i class="fa fa-trash fa-fw"></i> {{language.delete}}
                  </button>
                </div>
                <div class="step_3_selection_table" id="opti_configur-wizard-four-step-selectiontable">
                  <div class="">
                    <kendo-grid [kendoGridBinding]="step3_data_final" [resizable]="true" [sortable]="false" [groupable]="false"
                      [filterable]="false">
                      <kendo-grid-column field="step_4_right_grid_item" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          #
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          {{row.rowIndex}}
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_serial" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.serial}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          {{row.sl_no}}
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_item" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.item}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          {{row.item}}
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_quantity" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          <span class="text-right">{{this.language.quantity}}</span>
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          <span class="text-right" style=" float: right; ">{{row.quantity}}</span>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_item" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.price}} ({{this.defaultCurrency}})
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          {{row.price}}
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_item" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{this.language.price_extn}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          {{row.price_ext}}
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="step_4_right_grid_item" title="" template="" [width]="120"
                        [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          <i class="fa fa-trash fa-fw"></i>
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-row>
                          <button type="button" class="btn btn-sm mr-10 btn-danger" (click)="remove_final_modal(row)"
                            title="{{language.remove_this_modal}}">
                            <i class="fa fa-trash fa-fw"></i>
                          </button>
                        </ng-template>
                      </kendo-grid-column>
                    </kendo-grid>
                    <!-- <table class="table opti_fixed-header table-bordered table-sm">
                      <thead class="thead-dark">
                        <tr>
                          <th *ngFor="let label of final_selection_header; let i= index" [hidden]="step3_data_final_hidden_elements[i]">
                            <span *ngIf="final_selection_header.length-1 == i">
                              <i class="fa fa-trash fa-fw"></i>
                            </span>
                            <span *ngIf="final_selection_header.length-1 != i">
                              {{label}}
                            </span>
                          </th>
                        </tr>
                      </thead>
                      <tbody style="position: relative;" [perfectScrollbar]="" [disabled]="isPerfectSCrollBar">
                        <tr class="" *ngFor="let row of step3_data_final">
                          <td *ngFor="let row_data of Object.keys(row); let i= index" [hidden]="step3_data_final_hidden_elements[i]">
                            <span *ngIf="(Object.keys(row).length-1) != i">
                              <span *ngIf="i==0">
                                <input type="checkbox" name="modal_checkbox" #checkedvalue (change)="on_checkbox_checked(checkedvalue, row)">
                              </span>
                              <span *ngIf="i!=0">
                                {{row[row_data]}}
                              </span>
                            </span>
                            <span *ngIf="(Object.keys(row).length-1) == i">
                              <button type="button" class="btn btn-sm mr-10 btn-danger" (click)="remove_final_modal(row)" title="{{language.remove_this_modal}}">
                                <i class="fa fa-trash fa-fw"></i>
                              </button>
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </table> -->
                  </div>

                </div>
                <div class="final_item_discount_table">
                  <div class="col-md-6 pull-right pr-0 mt-4">
                    <table class="table table-bordered table-sm">
                      <thead class="" style=" font-size: 14px; ">
                        <tr>
                          <td>
                            {{this.language.total_before_discount}} ({{defaultCurrency}})
                          </td>
                          <td class="text-right mr-3">{{this.feature_total_before_discount | toFixed:'3'}}</td>
                        </tr>
                        <tr>
                          <th width="70%">{{language.product_discount}}</th>
                          <td width="30%" class="text-right mr-3">
                            {{this.feature_discount_percent}}
                          </td>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- <tr>
                          <td>
                            {{this.language.product_tax}}
                          </td>
                          <td>{{this.feature_item_tax}}</td>
                        </tr> -->
                        <tr>
                          <td>
                            {{this.language.product_total}} ({{defaultCurrency}})
                          </td>
                          <td class="text-right mr-3">{{this.feature_item_total | toFixed:'3'}}</td>
                        </tr>
                        <tr>
                          <td>
                            {{this.language.accessories_discount}}
                          </td>
                          <td class="text-right mr-3">
                            {{this.accessory_discount_percent | toFixed:'3'}}
                          </td>
                        </tr>
                        <!-- <tr>
                          <td>
                            {{this.language.accessories_tax}}
                          </td>
                          <td>{{this.acc_item_tax}}</td>
                        </tr> -->
                        <tr>
                          <td>
                            {{this.language.accessories_total}} ({{defaultCurrency}})
                          </td>
                          <td class="text-right mr-3">{{this.accessory_item_total | toFixed:'3'}}</td>
                        </tr>
                      </tbody>
                      <tfoot>
                        <tr style=" font-size: 14px; ">
                          <th>{{this.language.grand_total}} ({{defaultCurrency}})</th>
                          <td class="text-right mr-3">{{this.acc_grand_total | toFixed:'3'}}</td>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Verify the Selection and Accept -->

          <div class="f1-buttons">
            <hr>

            <span class="output_final_screen_save_button">
              <button (click)="onSavePress()" type="button" class="btn btn-sm btn-success   mr-10">
                <i class="fa fa-check fa-fw"></i> {{language.save}}</button>
            </span>

            <button type="button" class="btn btn-sm btn-dark  mr-10 btn-previous" data-previous-block="model_bom_config">
              <i class="fa fa-arrow-left fa-fw"></i> {{language.previous}}</button>

            <span class="output_final_screen_save_button">
              <button (click)="onFinishPress('screen4_data', 'finishPress')" *ngIf="step3_data_final.length > 0  && step1_data.document != 'draft'"
                type="submit" class="btn btn-sm btn-primary   mr-10 btn-submit  btn-next" data-next-block="fina_doc_create">
                <i class="fa fa-check-circle fa-fw"></i> {{language.finish}}</button>
            </span>
          </div>
        </fieldset>

        <fieldset class="one_step_block" data-block_id="fina_doc_create">
          <div class="wizard_heading_section">
            <div class="row bg-primary pb-1 pt-1 wizard_font">
              <div class="col-md-10 pull-left">
                <i class="fa fa-user fa-fw"></i> {{language.sales_order_creation}} </div>
              <div class="col-md-2 pull-right text-right"> {{language.step_5_5}} </div>
            </div>
            <hr>
          </div>
          <!-- start final document creation -->
          <div class="form_section" id="opti_configur-wizard-last-step">
            <div class="row">
              <div class="col-sm-3" id="opti_configur-wizard-last-step-leftside">
                <div class="new item section">
                  <h6>{{language.lsit_of_new_item_created}}</h6>
                  <table *ngIf="new_item_list.length" class="table table-sm table-bordered table-strip">
                    <thead class="thead-dark">
                      <tr>
                        <th>{{this.language.model}}</th>
                        <th>{{this.language.item_code}}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let new_item of new_item_list">
                        <td>{{new_item.OPTM_FGITEM}} </td>
                        <td>{{new_item.OPTM_REFITEMCODE}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="col-sm-9 border-left-primary" id="opti_configur-wizard-last-step-rightside">
                <div class="customer_detail_section">
                  <div class="row">
                    <div class="col-md-12 pr-0">
                      <div class="pull-right">
                        <button type="button" (click)="refresh_bom_status()" class="mr-10 btn btn-sm btn-outline-primary refresh_btn">
                          <span class="showLoader" [hidden]="showFinalLoader">
                            <i class="fa fa-spinner fa-spin fa-fw"></i> {{this.language.refreshing}}
                          </span>
                          <span class="dontShowLoader" [hidden]="dontShowFinalLoader">
                            <i class="fa fa-refresh fa-fw"></i> {{this.language.refresh}}
                          </span>
                        </button>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.order_type}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.document_name}}</label>
                      </div>

                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.order_status}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label">
                          <b class="final_order_status_class font-weight-light">{{final_order_status}}</b>
                        </label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label ">
                          <b>{{language.ref_doc_no}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{final_document_number}}</label>
                      </div>

                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.ref_doc_entry}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{final_ref_doc_entry}}</label>
                      </div>

                    </div>
                    <div class="col-md-6">


                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.posting_date}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{step1_data.posting_date |
                          date: 'MM/dd/yyyy'}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.delivery_date}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{step1_data.delivery_until
                          | date: 'MM/dd/yyyy'}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.configuration_id}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{iLogID}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.description}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{step1_data.description}}</label>
                      </div>

                    </div>
                  </div>
                </div>
                <hr>
                <div class="order_detail_section">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.customer}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.customer}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.name}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.name}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.contact_person}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.person_name}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.ship_to}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.ship_to}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.address}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.ship_to_address}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.bill_to}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.bill_to}}</label>

                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.address}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.bill_to_address}}</label>
                      </div>

                    </div>
                    <div class="col-md-6">

                      <!--   <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.payment_terms}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{step1_data.payment_terms}}</label>
                      </div>

                      <div class="form-group row clearfix ">
                        <label class="col-sm-5 col-form-label text-left">
                          <b>{{language.payment_method}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label text-right font-weight-light">{{step1_data.payment_method}}</label>
                      </div> -->

                    </div>
                  </div>
                </div>
                <hr>
                <div class="pricing_detail_section">
                  <div class="row">
                    <!-- <div class="col-md-3"> </div> -->
                    <div class="col-md-12 pr-0">
                      <div class="accessories_table">
                        <kendo-grid [kendoGridBinding]="step3_data_final" [resizable]="true" [sortable]="false"
                          [groupable]="false" [filterable]="false">
                          <kendo-grid-column field="step_5_right_grid_rowIndex" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              {{this.language.hash}}
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              {{row.rowIndex}}
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="step_5_right_grid_sl_no" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              SI#
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              {{row.sl_no}}
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="step_5_right_grid_item" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              {{this.language.item}}
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              {{row.item}}
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="step_5_right_grid_qunatity" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span class="text-right">{{this.language.quantity}}</span>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              <span class="text-right" style=" float: right; ">{{row.quantity}}</span>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="step_5_right_grid_price" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              {{this.language.price}} ({{this.defaultCurrency}})
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              {{row.price}}
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="step_5_right_grid_price_ext" title="" template="" [width]="120"
                            [minResizableWidth]="120">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              {{this.language.price_extn}}
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-row>
                              {{row.price_ext}}
                            </ng-template>
                          </kendo-grid-column>
                        </kendo-grid>
                        <!-- <table class="table table-bordered table-sm lookup_table">
                          <thead class="thead-dark">
                            <tr>
                              <th *ngFor="let label of order_creation_table_head; let i= index">
                                <span>
                                  {{label}}
                                </span>
                              </th>
                            </tr>
                          </thead>
                          <tbody class="lookup_table_body" [perfectScrollbar]="" [disabled]="isPerfectSCrollBar">
                            <tr class="" *ngFor="let row of step3_data_final">
                              <span *ngIf="(Object.keys(row).length-1) != i">
                                <td *ngFor="let row_data of Object.keys(row); let i= index" [hidden]="step4_data_final_hidden_elements[i]">
                                  {{row[row_data]}}
                                </td>
                              </span>
                            </tr>
                          </tbody>
                        </table> -->
                      </div>
                      <br>
                    </div>
                  </div>
                  <div class="">
                    <div class="col-md-6 pull-left">
                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.sales_employee}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.sales_employee}}</label>
                      </div>
                      <div class="form-group row clearfix">
                        <label class="col-sm-5 col-form-label">
                          <b>{{language.remark}}</b>
                        </label>
                        <label class="col-sm-7 col-form-label font-weight-light">{{step1_data.remark}}</label>
                      </div>
                    </div>
                    <div class="item_discount_table">
                      <div class="col-md-4 pull-right">
                        <table class="table table-bordered table-sm">
                          <thead class="" style=" font-size: 14px; ">
                            <tr>
                              <td>
                                {{this.language.total_before_discount}} ({{defaultCurrency}})
                              </td>
                              <td class="text-right mr-3">{{this.feature_total_before_discount | toFixed:'3'}}</td>
                            </tr>
                            <tr>
                              <th>{{language.product_discount}}</th>
                              <td class="pull-right text-right border_none">
                                {{this.feature_discount_percent}}
                              </td>
                            </tr>
                          </thead>
                          <tbody>
                            <!-- <tr>
                              <td>
                                {{this.language.product_tax}}
                              </td>
                              <td>{{this.feature_item_tax}}</td>
                            </tr> -->
                            <tr>
                              <td>
                                {{this.language.product_total}} ({{defaultCurrency}})
                              </td>
                              <td class="text-right mr-3">{{this.feature_item_total | toFixed:'3'}}</td>
                            </tr>
                            <tr>
                              <td>
                                {{this.language.accessories_discount}}
                              </td>
                              <td class="text-right mr-3">
                                {{this.accessory_discount_percent}}
                              </td>
                            </tr>
                            <!-- <tr>
                              <td>
                                {{this.language.accessories_tax}}
                              </td>
                              <td>{{this.acc_item_tax}}</td>
                            </tr> -->
                            <tr>
                              <td>
                                {{this.language.accessories_total}} ({{defaultCurrency}})
                              </td>
                              <td class="text-right mr-3">{{this.accessory_item_total | toFixed:'3'}}</td>
                            </tr>
                          </tbody>
                          <tfoot>
                            <tr style=" font-size: 14px; ">
                              <th>{{this.language.grand_total}} ({{defaultCurrency}})</th>
                              <td class="text-right mr-3">{{this.acc_grand_total | toFixed:'3'}}</td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- end final document creation -->

          <div class="f1-buttons">
            <hr>
            <!-- <button type="button" class="btn btn-sm btn-dark  mr-10 btn-previous" data-previous-block="accept_bom_so">
              <i class="fa fa-arrow-left fa-fw"></i> {{language.previous}}</button> -->
            <a href="javascript:;" type="button" class="btn btn-sm btn-primary  mr-10 text-white" (click)="start_new_configuration_click()">
              <i class="fa fa-arrow-left fa-fw"></i> {{language.start_new_configuration}}
            </a>
            <!--   <button type="submit" class="btn btn-sm btn-primary  mr-10 btn-submit">Submit</button> -->
          </div>
        </fieldset>

      </form>
    </div>
  </div>
</div>


<!--Custom Dialog-->
<app-custom-dialogs *ngIf="show_dialog" [dialogParams]="dialog_params" (userSelectionValue)="get_dialog_value($event)"></app-custom-dialogs>


<app-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupvalue)="getLookupValue($event) " [selectedImage]="selectedImage"></app-lookup>